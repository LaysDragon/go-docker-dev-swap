# ============================================
# Docker Dev Swap 配置文件範例
# ============================================
# 複製此文件為 config.yaml 並修改為你的設定

# 執行模式：
# - "remote": 遠端模式，通過 SSH 連接到遠端主機操作 Docker（默認）
# - "local": 本地模式，直接在本地操作 Docker（不需要 SSH，tunnel 功能會被跳過）
# mode: "remote"                             # [可選] 默認: remote

# 遠端主機配置（僅在 remote 模式下需要）
remote_host:
  host: "192.168.1.100"                      # [必要] 遠端主機地址
  user: "developer"                          # [必要] SSH 用戶名
  
  # 認證方式：密碼或金鑰二選一
  password: "your-password"                  # [可選] SSH 密碼
  # key_file: "/home/user/.ssh/id_rsa"       # [可選] SSH 私鑰路徑
  
  # port: 22                                 # [可選] SSH 端口 (默認: 22)

# Docker Compose 應用目錄
compose_dir: "/opt/microservices/my-app"     # [必要] docker-compose.yml 所在目錄

# 目標服務名稱
target_service: "api-service"                # [必要] docker-compose 中的服務名稱

# 本地編譯的執行檔路徑
local_binary: "./bin/api-service"            # [必要] 本地二進制文件路徑


# 遠端工作目錄（所有臨時檔案存放位置）
# remote_work_dir: "/tmp/dev-binaries"       # [可選] 默認: /tmp/dev-binaries

# 遠端執行檔名稱（會自動附加在 remote_work_dir 下）
# remote_binary_name: "service"              # [可選] 默認: service

# 容器內的執行檔路徑
# container_binary_path: "/app/service"      # [可選] 默認: /app/service

# ============================================
# Sudo 提權配置
# ============================================
# 通用的 sudo 包裝機制，適用於所有需要提權的命令
# 使用臨時提權 bash 執行命令，提高兼容性

# use_sudo: false                            # [可選] 是否使用 sudo 執行命令，默認: false
# sudo_password: ""                          # [可選] sudo 提權密碼（如需要），默認: "" (無密碼)
#                                            #        ⚠️ 安全建議：使用環境變量 DDS_SUDO_PASSWORD 而非配置文件
#                                            #        ⚠️ 生產環境建議配置 NOPASSWD 避免密碼存儲

# ============================================
# Docker 命令配置
# ============================================
# docker_command: "docker"                   # [可選] docker 命令路徑，默認: docker
# docker_compose_command: "docker compose"   # [可選] docker compose 命令，默認: docker compose
#                                            #        可選值: "docker compose" (V2) 或 "docker-compose" (V1)

# Debugger 端口 (本地監聽端口)
# debugger_port: 2345                        # [可選] 默認: 2345

# 額外需要暴露的端口
# extra_ports: []                            # [可選] 默認: []
#   - 8080
#   - 9090

# 容器啟動前執行的初始化腳本（用於安裝依賴等）
# initial_scripts: ""                        # [可選] 默認: ""
# 範例：
# initial_scripts: |
#   apk add --no-cache libc6-compat
#   echo "容器初始化完成"

# 日誌文件路徑（將容器日誌寫入本地文件）
# log_file: ""                               # [可選] 默認: "" (不寫入文件)
# 範例：
# log_file: "./logs/container.log"
# log_file: "/tmp/docker-dev-swap/app.log"

# Delve Debugger 配置
# dlv_config:
#   enabled: true                            # [可選] 默認: true
#   port: 2345                               # [可選] 默認: 2345
#   args: ""                                 # [可選] 默認: ""
#   # 可用參數示例：
#   # args: "--log --log-output=debugger,rpc"
#   local_path: ""                           # [可選] 本地 dlv 路徑，空則自動搜尋
#   # 示例: local_path: "/usr/local/go/bin/dlv"
#   # 示例: local_path: "~/go/bin/dlv"